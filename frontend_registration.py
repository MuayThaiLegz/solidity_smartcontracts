import time
import os 
import json
import streamlit as st
from web3 import Web3
from web3 import Account
from eth_account import account
from eth_typing.evm import Address
from tensorflow.python.framework.dtypes import as_dtype
from tensorflow.python.ops.gen_math_ops import bucketize
from tensorflow.python.ops.gen_string_ops import string_format
from pathlib import Path
from dotenv import load_dotenv
from dataclasses import dataclass
from datetime import datetime
from typing import Any
from bip44 import Wallet
from mnemonic import Mnemonic

# The funtion 



load_dotenv()
mnemonic = os.getenv("MNEMONIC")

st.cache(allow_output_mutation=True)


bytecode = ('60806040523480156200001157600080fd5b506040518060400160405280600781526020017f737761704f7574000000000000000000000000000000000000000000000000008152506040518060400160405280600481526020017f53574150000000000000000000000000000000000000000000000000000000008152508181620000986301ffc9a760e01b6200011c60201b60201c565b620000b06380ac58cd60e01b6200011c60201b60201c565b620000c863780e9d6360e01b6200011c60201b60201c565b8160099080519060200190620000e092919062000227565b5080600a9080519060200190620000f992919062000227565b5062000112635b5e139f60e01b6200011c60201b60201c565b50505050620002d6565b63ffffffff60e01b817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614151515620001bb576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f4552433136353a20696e76616c696420696e746572666163652069640000000081525060200191505060405180910390fd5b6001600080837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200026a57805160ff19168380011785556200029b565b828001600101855582156200029b579182015b828111156200029a5782518255916020019190600101906200027d565b5b509050620002aa9190620002ae565b5090565b620002d391905b80821115620002cf576000816000905550600101620002b5565b5090565b90565b612eba80620002e66000396000f3fe608060405234801561001057600080fd5b506004361061012c5760003560e01c80636352211e116100ad578063b88d4fde11610071578063b88d4fde14610770578063c41d3a6a14610875578063c87b56dd1461096e578063ce93e80214610a15578063e985e9c514610af85761012c565b80636352211e146105545780636c0360eb146105c257806370a082311461064557806395d89b411461069d578063a22cb465146107205761012c565b806323b872dd116100f457806323b872dd146102f35780632f745c59146103615780633367fa74146103c357806342842e0e146104a45780634f6ccce7146105125761012c565b806301ffc9a71461013157806306fdde0314610196578063081812fc14610219578063095ea7b31461028757806318160ddd146102d5575b600080fd5b61017c6004803603602081101561014757600080fd5b8101908080357bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169060200190929190505050610b74565b604051808215151515815260200191505060405180910390f35b61019e610bdb565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101de5780820151818401526020810190506101c3565b50505050905090810190601f16801561020b5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6102456004803603602081101561022f57600080fd5b8101908080359060200190929190505050610c7d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6102d36004803603604081101561029d57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610d1a565b005b6102dd610f05565b6040518082815260200191505060405180910390f35b61035f6004803603606081101561030957600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610f12565b005b6103ad6004803603604081101561037757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610f8a565b6040518082815260200191505060405180910390f35b6103ef600480360360208110156103d957600080fd5b810190808035906020019092919050505061104d565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001838152602001828103825284818151815260200191508051906020019080838360005b8381101561046757808201518184015260208101905061044c565b50505050905090810190601f1680156104945780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b610510600480360360608110156104ba57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061112f565b005b61053e6004803603602081101561052857600080fd5b810190808035906020019092919050505061114f565b6040518082815260200191505060405180910390f35b6105806004803603602081101561056a57600080fd5b81019080803590602001909291905050506111d3565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6105ca61129d565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561060a5780820151818401526020810190506105ef565b50505050905090810190601f1680156106375780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6106876004803603602081101561065b57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061133f565b6040518082815260200191505060405180910390f35b6106a5611416565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156106e55780820151818401526020810190506106ca565b50505050905090810190601f1680156107125780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b61076e6004803603604081101561073657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035151590602001909291905050506114b8565b005b6108736004803603608081101561078657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190803590602001906401000000008111156107ed57600080fd5b8201836020820111156107ff57600080fd5b8035906020019184600183028401116401000000008311171561082157600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050611672565b005b6109586004803603606081101561088b57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001906401000000008111156108c857600080fd5b8201836020820111156108da57600080fd5b803590602001918460018302840111640100000000831117156108fc57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290803590602001909291905050506116ec565b6040518082815260200191505060405180910390f35b61099a6004803603602081101561098457600080fd5b81019080803590602001909291905050506117cd565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156109da5780820151818401526020810190506109bf565b50505050905090810190601f168015610a075780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b610ae260048036036060811015610a2b57600080fd5b81019080803590602001909291908035906020019092919080359060200190640100000000811115610a5c57600080fd5b820183602082011115610a6e57600080fd5b80359060200191846001830284011164010000000083111715610a9057600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506119d3565b6040518082815260200191505060405180910390f35b610b5a60048036036040811015610b0e57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611abc565b604051808215151515815260200191505060405180910390f35b6000806000837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200190815260200160002060009054906101000a900460ff169050919050565b606060098054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610c735780601f10610c4857610100808354040283529160200191610c73565b820191906000526020600020905b815481529060010190602001808311610c5657829003601f168201915b5050505050905090565b6000610c8882611b50565b1515610cdf576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602c815260200180612d61602c913960400191505060405180910390fd5b6002600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b6000610d25826111d3565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614151515610dae576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526021815260200180612e116021913960400191505060405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610dcd611bc2565b73ffffffffffffffffffffffffffffffffffffffff161480610dfc5750610dfb81610df6611bc2565b611abc565b5b1515610e53576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526038815260200180612cd66038913960400191505060405180910390fd5b826002600084815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550818373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a4505050565b6000600780549050905090565b610f23610f1d611bc2565b82611bca565b1515610f7a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526031815260200180612e326031913960400191505060405180910390fd5b610f85838383611cc0565b505050565b6000610f958361133f565b82101515610fee576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602b815260200180612c29602b913960400191505060405180910390fd5b600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208281548110151561103a57fe5b9060005260206000200154905092915050565b600d6020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561111f5780601f106110f45761010080835404028352916020019161111f565b820191906000526020600020905b81548152906001019060200180831161110257829003601f168201915b5050505050908060020154905083565b61114a83838360405180602001604052806000815250611672565b505050565b6000611159610f05565b821015156111b2576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602c815260200180612e63602c913960400191505060405180910390fd5b6007828154811015156111c157fe5b90600052602060002001549050919050565b6000806001600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515611294576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526029815260200180612d386029913960400191505060405180910390fd5b80915050919050565b6060600b8054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156113355780601f1061130a57610100808354040283529160200191611335565b820191906000526020600020905b81548152906001019060200180831161131857829003601f168201915b5050505050905090565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156113c8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602a815260200180612d0e602a913960400191505060405180910390fd5b61140f600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020611ce4565b9050919050565b6060600a8054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156114ae5780601f10611483576101008083540402835291602001916114ae565b820191906000526020600020905b81548152906001019060200180831161149157829003601f168201915b5050505050905090565b6114c0611bc2565b73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614151515611563576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260198152602001807f4552433732313a20617070726f766520746f2063616c6c65720000000000000081525060200191505060405180910390fd5b8060046000611570611bc2565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff1661161d611bc2565b73ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3183604051808215151515815260200191505060405180910390a35050565b61168361167d611bc2565b83611bca565b15156116da576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526031815260200180612e326031913960400191505060405180910390fd5b6116e684848484611cf2565b50505050565b6000806116f7610f05565b90506117038582611d66565b61170d8185611d87565b60405180606001604052808673ffffffffffffffffffffffffffffffffffffffff16815260200185815260200184815250600d600083815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010190805190602001906117b4929190612ad7565b5060408201518160020155905050809150509392505050565b60606117d882611b50565b151561182f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602f815260200180612de2602f913960400191505060405180910390fd5b6060600c60008481526020019081526020016000208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156118d85780601f106118ad576101008083540402835291602001916118d8565b820191906000526020600020905b8154815290600101906020018083116118bb57829003601f168201915b5050505050905060008151141561190157604051806020016040528060008152509150506119ce565b600b8160405160200180838054600181600116156101000203166002900480156119625780601f10611940576101008083540402835291820191611962565b820191906000526020600020905b81548152906001019060200180831161194e575b505082805190602001908083835b6020831015156119955780518252602082019150602081019050602083039250611970565b6001836020036101000a038019825116818451168082178552505050505050905001925050506040516020818303038152906040529150505b919050565b600082600d6000868152602001908152602001600020600201819055507fa54f8aff8741e60688b22cf37beb7b6229282fa5f5ee3a2928b06c8e58ee60338484846040518084815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015611a60578082015181840152602081019050611a45565b50505050905090810190601f168015611a8d5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a1600d60008581526020019081526020016000206002015490509392505050565b6000600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b6000806001600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415915050919050565b600033905090565b6000611bd582611b50565b1515611c2c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602c815260200180612caa602c913960400191505060405180910390fd5b6000611c37836111d3565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480611ca657508373ffffffffffffffffffffffffffffffffffffffff16611c8e84610c7d565b73ffffffffffffffffffffffffffffffffffffffff16145b80611cb75750611cb68185611abc565b5b91505092915050565b611ccb838383611e13565b611cd58382612072565b611cdf8282612216565b505050565b600081600001549050919050565b611cfd848484611cc0565b611d09848484846122dd565b1515611d60576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526032815260200180612c546032913960400191505060405180910390fd5b50505050565b611d70828261261f565b611d7a8282612216565b611d838161283b565b5050565b611d9082611b50565b1515611de7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602c815260200180612d8d602c913960400191505060405180910390fd5b80600c60008481526020019081526020016000209080519060200190611e0e929190612b57565b505050565b8273ffffffffffffffffffffffffffffffffffffffff16611e33826111d3565b73ffffffffffffffffffffffffffffffffffffffff16141515611ea1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526029815260200180612db96029913960400191505060405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614151515611f29576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526024815260200180612c866024913960400191505060405180910390fd5b611f3281612887565b611f79600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020612947565b611fc0600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002061296a565b816001600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505050565b60006120ca6001600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208054905061298090919063ffffffff16565b905060006006600084815260200190815260200160002054905081811415156121bd576000600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208381548110151561213b57fe5b9060005260206000200154905080600560008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208381548110151561219557fe5b9060005260206000200181905550816006600083815260200190815260200160002081905550505b600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002080548091906001900361220f9190612bd7565b5050505050565b600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805490506006600083815260200190815260200160002081905550600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190806001815401808255809150509060018203906000526020600020016000909192909190915055505050565b60006122fe8473ffffffffffffffffffffffffffffffffffffffff166129ca565b151561230d5760019050612617565b600060608573ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff1663150b7a02905060e01b612351611bc2565b898888604051602401808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b838110156124015780820151818401526020810190506123e6565b50505050905090810190601f16801561242e5780820380516001836020036101000a031916815260200191505b5095505050505050604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506040518082805190602001908083835b6020831015156124c857805182526020820191506020810190506020830392506124a3565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d806000811461252a576040519150601f19603f3d011682016040523d82523d6000602084013e61252f565b606091505b509150915081151561259f5760008151111561254e5780518082602001fd5b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526032815260200180612c546032913960400191505060405180910390fd5b60008180602001905160208110156125b657600080fd5b8101908080519060200190929190505050905063150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161493505050505b949350505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156126c4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260208152602001807f4552433732313a206d696e7420746f20746865207a65726f206164647265737381525060200191505060405180910390fd5b6126cd81611b50565b151515612742576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601c8152602001807f4552433732313a20746f6b656e20616c7265616479206d696e7465640000000081525060200191505060405180910390fd5b816001600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506127db600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002061296a565b808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a45050565b6007805490506008600083815260200190815260200160002081905550600781908060018154018082558091505090600182039060005260206000200160009091929091909150555050565b600073ffffffffffffffffffffffffffffffffffffffff166002600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156129445760006002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b61295f6001826000015461298090919063ffffffff16565b816000018190555050565b6001816000016000828254019250508190555050565b60006129c283836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250612a15565b905092915050565b60008060007fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a47060001b9050833f9150808214158015612a0c57506000801b8214155b92505050919050565b60008383111582901515612ac4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825283818151815260200191508051906020019080838360005b83811015612a89578082015181840152602081019050612a6e565b50505050905090810190601f168015612ab65780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b5060008385039050809150509392505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10612b1857805160ff1916838001178555612b46565b82800160010185558215612b46579182015b82811115612b45578251825591602001919060010190612b2a565b5b509050612b539190612c03565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10612b9857805160ff1916838001178555612bc6565b82800160010185558215612bc6579182015b82811115612bc5578251825591602001919060010190612baa565b5b509050612bd39190612c03565b5090565b815481835581811115612bfe57818360005260206000209182019101612bfd9190612c03565b5b505050565b612c2591905b80821115612c21576000816000905550600101612c09565b5090565b9056fe455243373231456e756d657261626c653a206f776e657220696e646578206f7574206f6620626f756e64734552433732313a207472616e7366657220746f206e6f6e20455243373231526563656976657220696d706c656d656e7465724552433732313a207472616e7366657220746f20746865207a65726f20616464726573734552433732313a206f70657261746f7220717565727920666f72206e6f6e6578697374656e7420746f6b656e4552433732313a20617070726f76652063616c6c6572206973206e6f74206f776e6572206e6f7220617070726f76656420666f7220616c6c4552433732313a2062616c616e636520717565727920666f7220746865207a65726f20616464726573734552433732313a206f776e657220717565727920666f72206e6f6e6578697374656e7420746f6b656e4552433732313a20617070726f76656420717565727920666f72206e6f6e6578697374656e7420746f6b656e4552433732314d657461646174613a2055524920736574206f66206e6f6e6578697374656e7420746f6b656e4552433732313a207472616e73666572206f6620746f6b656e2074686174206973206e6f74206f776e4552433732314d657461646174613a2055524920717565727920666f72206e6f6e6578697374656e7420746f6b656e4552433732313a20617070726f76616c20746f2063757272656e74206f776e65724552433732313a207472616e736665722063616c6c6572206973206e6f74206f776e6572206e6f7220617070726f766564455243373231456e756d657261626c653a20676c6f62616c20696e646578206f7574206f6620626f756e6473a165627a7a7230582084a9b07a48a14ccb54d877094393f7acaf3a847b7a2249f7ab3d30f3b36942dd0029')




abi = json.loads('[{"constant":true,"inputs":[{"name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"itemCollection","outputs":[{"name":"owner","type":"address"},{"name":"tokenURI","type":"string"},{"name":"price","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"baseURI","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokenId","type":"uint256"},{"name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"owner","type":"address"},{"name":"tokenURI","type":"string"},{"name":"price","type":"uint256"}],"name":"registerItem","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"tokenId","type":"uint256"},{"name":"newPrice","type":"uint256"},{"name":"reportURI","type":"string"}],"name":"priceAdjustment","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"owner","type":"address"},{"name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"tokenId","type":"uint256"},{"indexed":false,"name":"price","type":"uint256"},{"indexed":false,"name":"reportURI","type":"string"}],"name":"updatedPrice","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":true,"name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"approved","type":"address"},{"indexed":true,"name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"operator","type":"address"},{"indexed":false,"name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"}]')

ganache_url = "HTTP://127.0.0.1:7545"

web3 = Web3(Web3.HTTPProvider(ganache_url))

#web3.eth.defaultAccount  = web3.eth.accounts[0]



st.title("Welcome to Swapout!")


#st.write(options = rpc('eth_accounts'))


st.markdown("## Your customized virtual market place")

#background picture
st.markdown(
    """
    <style>
    .reportview-container {
        background: url("https://www.blackenterprise.com/wp-content/blogs.dir/1/files/2020/04/iStock-1125604286.jpg")
    }
   .sidebar-content {
        background: url("https://www.pngkit.com/png/detail/336-3367267_reset-icon-transparent-refresh-icon-blue.png")
    }
    <\style>
    """,
    unsafe_allow_html=True
)

import pickle as pkle
import os.path



header = st.beta_container()
personal_info = st.beta_container()
vehicle_info = st.beta_container()

prev, _ ,next = st.beta_columns([1, 8, 1])

next.button("Next")

prev.button("Previous")

with header:
    st.write("## Let's create your SWAPOUT Account!")
    
with personal_info:
    st.write("Personal Information")

    first, last = st.beta_columns(2)
    
    f = first.text_input("First Name")
    l = last.text_input("Last Name")

    email = st.text_input("Email Address")

    password, confirmpassword = st.beta_columns(2)

    password.text_input("Password", type="password")
    confirmpassword.text_input("Confirm Password", type="password")

    
    st.write("Vehicle Information")

    year = st.selectbox("What year is your car?", options = range(2021, 1949, -1))
         
    make = st.selectbox("What make is your vehicle?", options = ["Acura", "Alfa Romeo", "AMC", "Aston Marton", "Audi", "Bentley", "BMW", "Bugatti", "Buick", "Cadillac", "Chevrolet", "Chrysler", "Citroen", "Datsun", "Daewoo", "Delorean", "Dodge", "Eagle", "Ferarri", "FIAT", "Fisker", "Ford", "Freightliner", "Genesis", "Geo", "GMC", "Honda", "HUMMER", "Hyundai", "INFINITI", "Isuzu", "Jaguar", "Jeep", "Karma", "Kia", "Lamborghini", "Land Rover", "Lexus", "Lincoln", "Lotus", "LUCID", "Maserati", "Maybach", "MAZDA", "McLaren", "Mercedes-Benz", "Mercury", "MINI", "Mitsubishi", "NIO", "Nissan", "Oldsmobile", "Opel", "Peugot", "Plymouth", "Pontiac", "Porsche", "RAM", "Renault", "Rolls-Royce", "Saab", "Saturn", "Scion", "Skoda", "smart", "SRT", "Studebaker", "Subaru", "Suzuki", "Tesla", "Toyota", "Vauzhall", "Volkswagen", "Volvo", "Yugo"])

    model = st.text_input("What model is your car?")

    miles = st.text_input("How many miles does your car have?")

    certification = st.radio("Does your car have any aftermarket parts?", ("Yes", "No"))
        
    #price = st.number_input('Enter price')
  
    tokenURI = st.text_input(make, model)
    
    uploaded_files = st.file_uploader("Upload Images Here", accept_multiple_files=True)
    for uploaded_file in uploaded_files:
            bytes_data = uploaded_file.read()
            st.write("filename:", uploaded_file.name)
            st.write(bytes_data)


    if st.button('Finalize Registration'):
        if mnemonic is None:
            mnemo = Mnemonic("english")  
            mnemonic = mnemo.generate(strength=256)

        mnemonic_seed_phrase = st.write(
            f"""This is your Mnemonic seed phrase.
            Do not share with anyone.
            When used in sequence it will  allow access to the wallet we've just created for you.
            ---> {mnemonic}""")

        wallet = Wallet(mnemonic)

        wallet_obj = st.write(
            f""" With the help of the bip44 package and your Mnemonic seed phrase
            we created this universal wallet instance.
            {wallet}""")

        private, public = wallet.derive_account('eth')

        st.write(
            f"""{private} <-----
            This is an encoded represantiation of your private key and the only way you should store in your device""")

        account = Account.privateKeyToAccount(private)
        
        st.write(
            f"""{account.address} <----- This is the address associated with your new Ethereum account.
            We are using this address to store all your tokenized collectables and swaped for collectables on the Ethereum blockchain.""")

#contract_location = '0x63DCf274FB353E38Feb0baFeB4D9d2B5Fbfa537b'

#accounts = web3.eth.accounts


#genaralReg  = web3.eth.contract(abi = abi, bytecode = bytecode)




def Swap_DeeD():
    web3 = Web3(Web3.HTTPProvider(ganache_url))
    
    accounts = web3.eth.accounts

    web3.eth.defaultAccount  = web3.eth.accounts[0]
    account1 = '0xEb0B566D3f9eEc2915b681E4C89510d8f805a75d'
    contract_location = '0x54c1A2e76F862ac54a56b3e0c64b35bE5Ebf3DA0'
    #web3.eth.defaultAccount  = web3.eth.accounts
    #contract_location = '0xb0E03b17656Eef88d9891893277Cd85550765eB6'
    myContract = web3.eth.contract(abi = abi, bytecode = bytecode)
    #accounts = web3.eth.accounts 
    price = st.number_input("Price of Item", value=0, step=1)
    date = st.number_input("Date of post", value=0, step=1)
    DeeDEtails = st.text_input("Deed Details", value="Deed To Collectable")
    token_id = st.number_input("Enter a Swap Token ID to display", value=0, step=1)
    #tokenURI = DeeDEtails + inNameof
    if account1:
        st.write(f'This DeeD is in the name of {account1}')

    if  DeeDEtails:
        st.write(f'Details of DeeD  {account1}')

    if token_id:
        st.write(f" You selected {token_id}")

        if st.button('Create Tokenized DeeD'):
            DeeD_hash = myContract.functions.registerItem(account1, tokenURI, price).web3.eth.sendTransaction({'from' : contract_location, 'to' : account1})
            DeeD_receipt = web3.eth.waitForTransactionReceipt(DeeD_hash)
            print(DeeD_hash, DeeD_receipt)
            st.write(f'This is your transactionHash {DeeD_hash},Here is your TransactionReceipt {DeeD_receipt}')
            
            token_owner = myContract.functions.ownerOf(token_id).transact({'from' : contract_location, 'to' : account1})
            token_receipt = web3.eth.waitForTransactionReceipt(token_owner)
            print(token_owner, token_receipt)
            st.write(f'This is your token hash {token_owner},Here is your receipt of tokenization {token_receipt}')
        
            token_uri = myContract.functions.tokenURI(token_id).transact({'from' :contract_location, "to" :  account1})
            receipt_uri = web3.eth.waitForTransactionReceipt(token_uri)
            print(token_uri, receipt_uri)
            st.write(f'This is your URI hash {token_uri},Here is your URI receipt {receipt_uri}')

Swap_DeeD()